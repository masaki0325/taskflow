# ============================================================
# requirements.txt - Pythonパッケージの依存関係リスト
# ============================================================
# このファイルに記載されたパッケージが pip install でインストールされる
# バージョンを固定することで、環境による動作の違いを防ぐ
#
# インストール方法:
#   pip install -r requirements.txt

# ------------------------------------------------------------
# FastAPI フレームワーク - Webアプリケーションの基盤
# ------------------------------------------------------------
# FastAPI: 高速で使いやすいPythonのWebフレームワーク
# 特徴: 自動ドキュメント生成、型ヒント、非同期対応
# セキュリティアップデート: 0.109.0 → 0.128.0
fastapi==0.128.0

# uvicorn: FastAPIを動かすASGIサーバー
# [standard]: Websocketや高速化機能を含む標準版
# Node.jsでいう Express + http-server のような関係
uvicorn[standard]==0.27.0

# python-multipart: ファイルアップロード（FormData）の処理に必要
# セキュリティアップデート: 0.0.6 → 0.0.21 (ReDoS脆弱性修正)
python-multipart==0.0.21

# ------------------------------------------------------------
# データベース - PostgreSQLとの連携
# ------------------------------------------------------------
# SQLAlchemy: PythonのORM（Object-Relational Mapping）
# SQLを直接書かずに、Pythonコードでデータベース操作ができる
# 例: User.query.filter_by(email="user@example.com").first()
sqlalchemy==2.0.25

# Alembic: データベースマイグレーションツール
# テーブルの作成・変更履歴を管理（Gitのようなバージョン管理）
# 例: テーブルにカラム追加、インデックス作成など
alembic==1.13.1

# asyncpg: PostgreSQL用の非同期ドライバ（高速）
# SQLAlchemy の非同期モードで使用
asyncpg==0.29.0

# psycopg2-binary: PostgreSQL用の同期ドライバ
# Alembic のマイグレーション実行時に使用
psycopg2-binary==2.9.9

# ------------------------------------------------------------
# Redis - キャッシュとセッション管理
# ------------------------------------------------------------
# redis: Redisクライアントライブラリ
# 非同期対応 (redis.asyncio)
redis==5.0.1

# ------------------------------------------------------------
# 認証・セキュリティ - ユーザー認証とパスワード管理
# ------------------------------------------------------------
# python-jose: JWTトークンの生成と検証
# [cryptography]: 暗号化機能を含む
# JWT = ログイン状態を安全に保存するトークン
# セキュリティアップデート: 3.3.0 → 3.5.0 (JWT処理の脆弱性修正)
python-jose[cryptography]==3.5.0

# passlib: パスワードのハッシュ化（暗号化）
# [bcrypt]: bcryptアルゴリズムを使用（セキュアなハッシュ方式）
# 平文パスワードをDBに保存せず、ハッシュ化して保存
passlib[bcrypt]==1.7.4

# python-dotenv: .envファイルから環境変数を読み込む
# 例: DATABASE_URL、SECRET_KEY などの設定を管理
python-dotenv==1.0.0

# ------------------------------------------------------------
# バリデーション - データの検証
# ------------------------------------------------------------
# Pydantic: データの型チェックとバリデーション
# FastAPIのリクエスト・レスポンスの型定義に使用
# 例: class User(BaseModel): email: str, age: int
# アップデート: 2.5.3 → 2.12.5 (FastAPI 0.128.0 の要件)
pydantic==2.12.5

# pydantic-settings: 環境変数を型安全に読み込む
# 例: DATABASE_URL を自動的に読み込んで検証
pydantic-settings==2.1.0

# email-validator: メールアドレスの形式チェック
# 例: "invalid-email" → エラー、"user@example.com" → OK
email-validator==2.1.0

# ------------------------------------------------------------
# テスト - 自動テストの実行
# ------------------------------------------------------------
# pytest: Pythonのテストフレームワーク
# 単体テスト、統合テストの実行
pytest==7.4.4

# pytest-asyncio: 非同期関数のテストをサポート
# async def のテストを実行可能にする
pytest-asyncio==0.23.3

# httpx: HTTP クライアント（requestsの非同期版）
# APIのテストでリクエストを送信する際に使用
httpx==0.26.0

# ------------------------------------------------------------
# AWS S3 - ファイルストレージ（将来の実装用）
# ------------------------------------------------------------
# boto3: AWS SDK for Python
# S3へのファイルアップロード・ダウンロード
# 例: プロフィール画像、タスクの添付ファイル保存
boto3==1.34.26

# ------------------------------------------------------------
# Google OAuth - ソーシャルログイン（将来の実装用）
# ------------------------------------------------------------
# google-auth: Google認証ライブラリ
# Googleアカウントでのログイン機能
google-auth==2.26.2

# google-auth-oauthlib: OAuth 2.0 フロー
# 「Googleでログイン」ボタンの実装
google-auth-oauthlib==1.2.0

# ============================================================
# パッケージのバージョン固定について
# ============================================================
# == でバージョンを固定する理由:
# 1. 再現性: どの環境でも同じバージョンがインストールされる
# 2. 安定性: 新バージョンで互換性が壊れても影響を受けない
# 3. セキュリティ: 意図しないバージョンアップを防ぐ
#
# バージョンアップ時は、テストして問題ないことを確認してから
# ============================================================
